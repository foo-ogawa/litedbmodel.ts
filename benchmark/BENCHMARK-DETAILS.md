# Nested Relations Benchmark Details

## Overview

This benchmark compares ORM performance for nested relation queries:
- **Single Key**: 100 users → 1000 posts → 10000 comments (3-level nesting)
- **Composite Key**: 100 tenant_users → 1000 tenant_posts → 10000 tenant_comments (3-level with composite FK)

**Test Environment:**
- Rounds: 5
- Iterations per round: 20
- Database: PostgreSQL

---

## Results Summary

### Single Key Relations (100 → 1000 → 10000)

| ORM | Median | Ratio | Queries |
|-----|--------|-------|---------|
| Drizzle | 23.80ms | 1.00x | 1 |
| litedbmodel | 28.24ms | 1.19x | 3 |
| Kysely | 29.51ms | 1.24x | 3 |
| TypeORM | 32.70ms | 1.37x | 2 |
| Prisma | 81.65ms | 3.43x | 3 |

### Composite Key Relations (100 → 1000)

| ORM | Median | Ratio | Queries |
|-----|--------|-------|---------|
| Kysely | 12.96ms | 1.00x | 3 |
| Drizzle | 17.50ms | 1.35x | 1 |
| litedbmodel | 24.69ms | 1.90x | 3 |
| TypeORM | 35.53ms | 2.74x | 2 |
| Prisma | 102.29ms | 7.89x | 3 |

---

## SQL Query Analysis

### Single Key Relations


#### litedbmodel

**Query Count:** 3

```sql
-- Query 1
SELECT * FROM benchmark_users ORDER BY id ASC LIMIT 100

-- Query 2
SELECT * FROM benchmark_posts WHERE benchmark_posts.author_id = ANY($1::int[])

-- Query 3
SELECT * FROM benchmark_comments WHERE benchmark_comments.post_id = ANY($1::int[])
```


#### Prisma

**Query Count:** 3

```sql
-- Query 1
SELECT "public"."benchmark_users"."id", "public"."benchmark_users"."email", "public"."benchmark_users"."name", "public"."benchmark_users"."created_at", "public"."benchmark_users"."updated_at" FROM "public"."benchmark_users" WHERE 1=1 ORDER BY "public"."benchmark_users"."id" ASC LIMIT $1 OFFSET $2

-- Query 2
SELECT "public"."benchmark_posts"."id", "public"."benchmark_posts"."title", "public"."benchmark_posts"."content", "public"."benchmark_posts"."published", "public"."benchmark_posts"."author_id", "public"."benchmark_posts"."created_at" FROM "public"."benchmark_posts" WHERE "public"."benchmark_posts"."author_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100) OFFSET $101

-- Query 3
SELECT "public"."benchmark_comments"."id", "public"."benchmark_comments"."body", "public"."benchmark_comments"."post_id", "public"."benchmark_comments"."created_at" FROM "public"."benchmark_comments" WHERE "public"."benchmark_comments"."post_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38,$39,$40,$41,$42,$43,$44,$45,$46,$47,$48,$49,$50,$51,$52,$53,$54,$55,$56,$57,$58,$59,$60,$61,$62,$63,$64,$65,$66,$67,$68,$69,$70,$71,$72,$73,$74,$75,$76,$77,$78,$79,$80,$81,$82,$83,$84,$85,$86,$87,$88,$89,$90,$91,$92,$93,$94,$95,$96,$97,$98,$99,$100,$101,$102,$103,$104,$105,$106,$107,$108,$109,$110,$111,$112,$113,$114,$115,$116,$117,$118,$119,$120,$121,$122,$123,$124,$125,$126,$127,$128,$129,$130,$131,$132,$133,$134,$135,$136,$137,$138,$139,$140,$141,$142,$143,$144,$145,$146,$147,$148,$149,$150,$151,$152,$153,$154,$155,$156,$157,$158,$159,$160,$161,$162,$163,$164,$165,$166,$167,$168,$169,$170,$171,$172,$173,$174,$175,$176,$177,$178,$179,$180,$181,$182,$183,$184,$185,$186,$187,$188,$189,$190,$191,$192,$193,$194,$195,$196,$197,$198,$199,$200,$201,$202,$203,$204,$205,$206,$207,$208,$209,$210,$211,$212,$213,$214,$215,$216,$217,$218,$219,$220,$221,$222,$223,$224,$225,$226,$227,$228,$229,$230,$231,$232,$233,$234,$235,$236,$237,$238,$239,$240,$241,$242,$243,$244,$245,$246,$247,$248,$249,$250,$251,$252,$253,$254,$255,$256,$257,$258,$259,$260,$261,$262,$263,$264,$265,$266,$267,$268,$269,$270,$271,$272,$273,$274,$275,$276,$277,$278,$279,$280,$281,$282,$283,$284,$285,$286,$287,$288,$289,$290,$291,$292,$293,$294,$295,$296,$297,$298,$299,$300,$301,$302,$303,$304,$305,$306,$307,$308,$309,$310,$311,$312,$313,$314,$315,$316,$317,$318,$319,$320,$321,$322,$323,$324,$325,$326,$327,$328,$329,$330,$331,$332,$333,$334,$335,$336,$337,$338,$339,$340,$341,$342,$343,$344,$345,$346,$347,$348,$349,$350,$351,$352,$353,$354,$355,$356,$357,$358,$359,$360,$361,$362,$363,$364,$365,$366,$367,$368,$369,$370,$371,$372,$373,$374,$375,$376,$377,$378,$379,$380,$381,$382,$383,$384,$385,$386,$387,$388,$389,$390,$391,$392,$393,$394,$395,$396,$397,$398,$399,$400,$401,$402,$403,$404,$405,$406,$407,$408,$409,$410,$411,$412,$413,$414,$415,$416,$417,$418,$419,$420,$421,$422,$423,$424,$425,$426,$427,$428,$429,$430,$431,$432,$433,$434,$435,$436,$437,$438,$439,$440,$441,$442,$443,$444,$445,$446,$447,$448,$449,$450,$451,$452,$453,$454,$455,$456,$457,$458,$459,$460,$461,$462,$463,$464,$465,$466,$467,$468,$469,$470,$471,$472,$473,$474,$475,$476,$477,$478,$479,$480,$481,$482,$483,$484,$485,$486,$487,$488,$489,$490,$491,$492,$493,$494,$495,$496,$497,$498,$499,$500,$501,$502,$503,$504,$505,$506,$507,$508,$509,$510,$511,$512,$513,$514,$515,$516,$517,$518,$519,$520,$521,$522,$523,$524,$525,$526,$527,$528,$529,$530,$531,$532,$533,$534,$535,$536,$537,$538,$539,$540,$541,$542,$543,$544,$545,$546,$547,$548,$549,$550,$551,$552,$553,$554,$555,$556,$557,$558,$559,$560,$561,$562,$563,$564,$565,$566,$567,$568,$569,$570,$571,$572,$573,$574,$575,$576,$577,$578,$579,$580,$581,$582,$583,$584,$585,$586,$587,$588,$589,$590,$591,$592,$593,$594,$595,$596,$597,$598,$599,$600,$601,$602,$603,$604,$605,$606,$607,$608,$609,$610,$611,$612,$613,$614,$615,$616,$617,$618,$619,$620,$621,$622,$623,$624,$625,$626,$627,$628,$629,$630,$631,$632,$633,$634,$635,$636,$637,$638,$639,$640,$641,$642,$643,$644,$645,$646,$647,$648,$649,$650,$651,$652,$653,$654,$655,$656,$657,$658,$659,$660,$661,$662,$663,$664,$665,$666,$667,$668,$669,$670,$671,$672,$673,$674,$675,$676,$677,$678,$679,$680,$681,$682,$683,$684,$685,$686,$687,$688,$689,$690,$691,$692,$693,$694,$695,$696,$697,$698,$699,$700,$701,$702,$703,$704,$705,$706,$707,$708,$709,$710,$711,$712,$713,$714,$715,$716,$717,$718,$719,$720,$721,$722,$723,$724,$725,$726,$727,$728,$729,$730,$731,$732,$733,$734,$735,$736,$737,$738,$739,$740,$741,$742,$743,$744,$745,$746,$747,$748,$749,$750,$751,$752,$753,$754,$755,$756,$757,$758,$759,$760,$761,$762,$763,$764,$765,$766,$767,$768,$769,$770,$771,$772,$773,$774,$775,$776,$777,$778,$779,$780,$781,$782,$783,$784,$785,$786,$787,$788,$789,$790,$791,$792,$793,$794,$795,$796,$797,$798,$799,$800,$801,$802,$803,$804,$805,$806,$807,$808,$809,$810,$811,$812,$813,$814,$815,$816,$817,$818,$819,$820,$821,$822,$823,$824,$825,$826,$827,$828,$829,$830,$831,$832,$833,$834,$835,$836,$837,$838,$839,$840,$841,$842,$843,$844,$845,$846,$847,$848,$849,$850,$851,$852,$853,$854,$855,$856,$857,$858,$859,$860,$861,$862,$863,$864,$865,$866,$867,$868,$869,$870,$871,$872,$873,$874,$875,$876,$877,$878,$879,$880,$881,$882,$883,$884,$885,$886,$887,$888,$889,$890,$891,$892,$893,$894,$895,$896,$897,$898,$899,$900,$901,$902,$903,$904,$905,$906,$907,$908,$909,$910,$911,$912,$913,$914,$915,$916,$917,$918,$919,$920,$921,$922,$923,$924,$925,$926,$927,$928,$929,$930,$931,$932,$933,$934,$935,$936,$937,$938,$939,$940,$941,$942,$943,$944,$945,$946,$947,$948,$949,$950,$951,$952,$953,$954,$955,$956,$957,$958,$959,$960,$961,$962,$963,$964,$965,$966,$967,$968,$969,$970,$971,$972,$973,$974,$975,$976,$977,$978,$979,$980,$981,$982,$983,$984,$985,$986,$987,$988,$989,$990,$991,$992,$993,$994,$995,$996,$997,$998,$999,$1000) OFFSET $1001
```


#### Kysely

**Query Count:** 3

```sql
-- Query 1
select * from "benchmark_users" order by "id" limit $1

-- Query 2
select * from "benchmark_posts" where "author_id" in ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46, $47, $48, $49, $50, $51, $52, $53, $54, $55, $56, $57, $58, $59, $60, $61, $62, $63, $64, $65, $66, $67, $68, $69, $70, $71, $72, $73, $74, $75, $76, $77, $78, $79, $80, $81, $82, $83, $84, $85, $86, $87, $88, $89, $90, $91, $92, $93, $94, $95, $96, $97, $98, $99, $100)

-- Query 3
select * from "benchmark_comments" where "post_id" in ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46, $47, $48, $49, $50, $51, $52, $53, $54, $55, $56, $57, $58, $59, $60, $61, $62, $63, $64, $65, $66, $67, $68, $69, $70, $71, $72, $73, $74, $75, $76, $77, $78, $79, $80, $81, $82, $83, $84, $85, $86, $87, $88, $89, $90, $91, $92, $93, $94, $95, $96, $97, $98, $99, $100, $101, $102, $103, $104, $105, $106, $107, $108, $109, $110, $111, $112, $113, $114, $115, $116, $117, $118, $119, $120, $121, $122, $123, $124, $125, $126, $127, $128, $129, $130, $131, $132, $133, $134, $135, $136, $137, $138, $139, $140, $141, $142, $143, $144, $145, $146, $147, $148, $149, $150, $151, $152, $153, $154, $155, $156, $157, $158, $159, $160, $161, $162, $163, $164, $165, $166, $167, $168, $169, $170, $171, $172, $173, $174, $175, $176, $177, $178, $179, $180, $181, $182, $183, $184, $185, $186, $187, $188, $189, $190, $191, $192, $193, $194, $195, $196, $197, $198, $199, $200, $201, $202, $203, $204, $205, $206, $207, $208, $209, $210, $211, $212, $213, $214, $215, $216, $217, $218, $219, $220, $221, $222, $223, $224, $225, $226, $227, $228, $229, $230, $231, $232, $233, $234, $235, $236, $237, $238, $239, $240, $241, $242, $243, $244, $245, $246, $247, $248, $249, $250, $251, $252, $253, $254, $255, $256, $257, $258, $259, $260, $261, $262, $263, $264, $265, $266, $267, $268, $269, $270, $271, $272, $273, $274, $275, $276, $277, $278, $279, $280, $281, $282, $283, $284, $285, $286, $287, $288, $289, $290, $291, $292, $293, $294, $295, $296, $297, $298, $299, $300, $301, $302, $303, $304, $305, $306, $307, $308, $309, $310, $311, $312, $313, $314, $315, $316, $317, $318, $319, $320, $321, $322, $323, $324, $325, $326, $327, $328, $329, $330, $331, $332, $333, $334, $335, $336, $337, $338, $339, $340, $341, $342, $343, $344, $345, $346, $347, $348, $349, $350, $351, $352, $353, $354, $355, $356, $357, $358, $359, $360, $361, $362, $363, $364, $365, $366, $367, $368, $369, $370, $371, $372, $373, $374, $375, $376, $377, $378, $379, $380, $381, $382, $383, $384, $385, $386, $387, $388, $389, $390, $391, $392, $393, $394, $395, $396, $397, $398, $399, $400, $401, $402, $403, $404, $405, $406, $407, $408, $409, $410, $411, $412, $413, $414, $415, $416, $417, $418, $419, $420, $421, $422, $423, $424, $425, $426, $427, $428, $429, $430, $431, $432, $433, $434, $435, $436, $437, $438, $439, $440, $441, $442, $443, $444, $445, $446, $447, $448, $449, $450, $451, $452, $453, $454, $455, $456, $457, $458, $459, $460, $461, $462, $463, $464, $465, $466, $467, $468, $469, $470, $471, $472, $473, $474, $475, $476, $477, $478, $479, $480, $481, $482, $483, $484, $485, $486, $487, $488, $489, $490, $491, $492, $493, $494, $495, $496, $497, $498, $499, $500, $501, $502, $503, $504, $505, $506, $507, $508, $509, $510, $511, $512, $513, $514, $515, $516, $517, $518, $519, $520, $521, $522, $523, $524, $525, $526, $527, $528, $529, $530, $531, $532, $533, $534, $535, $536, $537, $538, $539, $540, $541, $542, $543, $544, $545, $546, $547, $548, $549, $550, $551, $552, $553, $554, $555, $556, $557, $558, $559, $560, $561, $562, $563, $564, $565, $566, $567, $568, $569, $570, $571, $572, $573, $574, $575, $576, $577, $578, $579, $580, $581, $582, $583, $584, $585, $586, $587, $588, $589, $590, $591, $592, $593, $594, $595, $596, $597, $598, $599, $600, $601, $602, $603, $604, $605, $606, $607, $608, $609, $610, $611, $612, $613, $614, $615, $616, $617, $618, $619, $620, $621, $622, $623, $624, $625, $626, $627, $628, $629, $630, $631, $632, $633, $634, $635, $636, $637, $638, $639, $640, $641, $642, $643, $644, $645, $646, $647, $648, $649, $650, $651, $652, $653, $654, $655, $656, $657, $658, $659, $660, $661, $662, $663, $664, $665, $666, $667, $668, $669, $670, $671, $672, $673, $674, $675, $676, $677, $678, $679, $680, $681, $682, $683, $684, $685, $686, $687, $688, $689, $690, $691, $692, $693, $694, $695, $696, $697, $698, $699, $700, $701, $702, $703, $704, $705, $706, $707, $708, $709, $710, $711, $712, $713, $714, $715, $716, $717, $718, $719, $720, $721, $722, $723, $724, $725, $726, $727, $728, $729, $730, $731, $732, $733, $734, $735, $736, $737, $738, $739, $740, $741, $742, $743, $744, $745, $746, $747, $748, $749, $750, $751, $752, $753, $754, $755, $756, $757, $758, $759, $760, $761, $762, $763, $764, $765, $766, $767, $768, $769, $770, $771, $772, $773, $774, $775, $776, $777, $778, $779, $780, $781, $782, $783, $784, $785, $786, $787, $788, $789, $790, $791, $792, $793, $794, $795, $796, $797, $798, $799, $800, $801, $802, $803, $804, $805, $806, $807, $808, $809, $810, $811, $812, $813, $814, $815, $816, $817, $818, $819, $820, $821, $822, $823, $824, $825, $826, $827, $828, $829, $830, $831, $832, $833, $834, $835, $836, $837, $838, $839, $840, $841, $842, $843, $844, $845, $846, $847, $848, $849, $850, $851, $852, $853, $854, $855, $856, $857, $858, $859, $860, $861, $862, $863, $864, $865, $866, $867, $868, $869, $870, $871, $872, $873, $874, $875, $876, $877, $878, $879, $880, $881, $882, $883, $884, $885, $886, $887, $888, $889, $890, $891, $892, $893, $894, $895, $896, $897, $898, $899, $900, $901, $902, $903, $904, $905, $906, $907, $908, $909, $910, $911, $912, $913, $914, $915, $916, $917, $918, $919, $920, $921, $922, $923, $924, $925, $926, $927, $928, $929, $930, $931, $932, $933, $934, $935, $936, $937, $938, $939, $940, $941, $942, $943, $944, $945, $946, $947, $948, $949, $950, $951, $952, $953, $954, $955, $956, $957, $958, $959, $960, $961, $962, $963, $964, $965, $966, $967, $968, $969, $970, $971, $972, $973, $974, $975, $976, $977, $978, $979, $980, $981, $982, $983, $984, $985, $986, $987, $988, $989, $990, $991, $992, $993, $994, $995, $996, $997, $998, $999, $1000)
```


#### Drizzle

**Query Count:** 1

```sql
-- Query 1
select "users"."id", "users"."email", "users"."name", "users_posts"."data" as "posts" from "benchmark_users" "users" left join lateral (select coalesce(json_agg(json_build_array("users_posts"."id", "users_posts"."title", "users_posts"."author_id", "users_posts_comments"."data")), '[]'::json) as "data" from "benchmark_posts" "users_posts" left join lateral (select coalesce(json_agg(json_build_array("users_posts_comments"."id", "users_posts_comments"."body", "users_posts_comments"."post_id")), '[]'::json) as "data" from "benchmark_comments" "users_posts_comments" where "users_posts_comments"."post_id" = "users_posts"."id") "users_posts_comments" on true where "users_posts"."author_id" = "users"."id") "users_posts" on true order by "users"."id" asc limit $1
```


#### TypeORM

**Query Count:** 2

```sql
-- Query 1
SELECT DISTINCT "distinctAlias"."TypeORMUser_id" AS "ids_TypeORMUser_id", "distinctAlias"."TypeORMUser_id" FROM (SELECT "TypeORMUser"."id" AS "TypeORMUser_id", "TypeORMUser"."email" AS "TypeORMUser_email", "TypeORMUser"."name" AS "TypeORMUser_name", "TypeORMUser__TypeORMUser_posts"."id" AS "TypeORMUser__TypeORMUser_posts_id", "TypeORMUser__TypeORMUser_posts"."title" AS "TypeORMUser__TypeORMUser_posts_title", "TypeORMUser__TypeORMUser_posts"."author_id" AS "TypeORMUser__TypeORMUser_posts_author_id", "44e9b3e14e8c506ab5696ff82803c1017462faac"."id" AS "44e9b3e14e8c506ab5696ff82803c1017462faac_id", "44e9b3e14e8c506ab5696ff82803c1017462faac"."body" AS "44e9b3e14e8c506ab5696ff82803c1017462faac_body", "44e9b3e14e8c506ab5696ff82803c1017462faac"."post_id" AS "44e9b3e14e8c506ab5696ff82803c1017462faac_post_id" FROM "benchmark_users" "TypeORMUser" LEFT JOIN "benchmark_posts" "TypeORMUser__TypeORMUser_posts" ON "TypeORMUser__TypeORMUser_posts"."author_id"="TypeORMUser"."id"  LEFT JOIN "benchmark_comments" "44e9b3e14e8c506ab5696ff82803c1017462faac" ON "44e9b3e14e8c506ab5696ff82803c1017462faac"."post_id"="TypeORMUser__TypeORMUser_posts"."id") "distinctAlias" ORDER BY "distinctAlias"."TypeORMUser_id" ASC, "TypeORMUser_id" ASC LIMIT 100

-- Query 2
SELECT "TypeORMUser"."id" AS "TypeORMUser_id", "TypeORMUser"."email" AS "TypeORMUser_email", "TypeORMUser"."name" AS "TypeORMUser_name", "TypeORMUser__TypeORMUser_posts"."id" AS "TypeORMUser__TypeORMUser_posts_id", "TypeORMUser__TypeORMUser_posts"."title" AS "TypeORMUser__TypeORMUser_posts_title", "TypeORMUser__TypeORMUser_posts"."author_id" AS "TypeORMUser__TypeORMUser_posts_author_id", "44e9b3e14e8c506ab5696ff82803c1017462faac"."id" AS "44e9b3e14e8c506ab5696ff82803c1017462faac_id", "44e9b3e14e8c506ab5696ff82803c1017462faac"."body" AS "44e9b3e14e8c506ab5696ff82803c1017462faac_body", "44e9b3e14e8c506ab5696ff82803c1017462faac"."post_id" AS "44e9b3e14e8c506ab5696ff82803c1017462faac_post_id" FROM "benchmark_users" "TypeORMUser" LEFT JOIN "benchmark_posts" "TypeORMUser__TypeORMUser_posts" ON "TypeORMUser__TypeORMUser_posts"."author_id"="TypeORMUser"."id"  LEFT JOIN "benchmark_comments" "44e9b3e14e8c506ab5696ff82803c1017462faac" ON "44e9b3e14e8c506ab5696ff82803c1017462faac"."post_id"="TypeORMUser__TypeORMUser_posts"."id" WHERE "TypeORMUser"."id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100) ORDER BY "TypeORMUser"."id" ASC
```


### Composite Key Relations


#### litedbmodel

**Query Count:** 3

```sql
-- Query 1
SELECT * FROM benchmark_tenant_users WHERE tenant_id = $1 LIMIT 100

-- Query 2
SELECT * FROM benchmark_tenant_posts JOIN unnest($1::int[], $2::int[]) AS _unnest_benchmark_tenant_posts(_unnest_benchmark_tenant_posts_tenant_id, _unnest_benchmark_tenant_posts_user_id) ON benchmark_tenant_posts.tenant_id = _unnest_benchmark_tenant_posts._unnest_benchmark_tenant_posts_tenant_id AND benchmark_tenant_posts.user_id = _unnest_benchmark_tenant_posts._unnest_benchmark_tenant_posts_user_id

-- Query 3
SELECT * FROM benchmark_tenant_comments JOIN unnest($1::int[], $2::int[]) AS _unnest_benchmark_tenant_comments(_unnest_benchmark_tenant_comments_tenant_id, _unnest_benchmark_tenant_comments_post_id) ON benchmark_tenant_comments.tenant_id = _unnest_benchmark_tenant_comments._unnest_benchmark_tenant_comments_tenant_id AND benchmark_tenant_comments.post_id = _unnest_benchmark_tenant_comments._unnest_benchmark_tenant_comments_post_id
```


#### Prisma

**Query Count:** 3

```sql
-- Query 1
SELECT "public"."benchmark_tenant_users"."tenant_id", "public"."benchmark_tenant_users"."user_id", "public"."benchmark_tenant_users"."name" FROM "public"."benchmark_tenant_users" WHERE "public"."benchmark_tenant_users"."tenant_id" = $1 ORDER BY "public"."benchmark_tenant_users"."tenant_id" ASC, "public"."benchmark_tenant_users"."user_id" ASC LIMIT $2 OFFSET $3

-- Query 2
SELECT "public"."benchmark_tenant_posts"."tenant_id", "public"."benchmark_tenant_posts"."post_id", "public"."benchmark_tenant_posts"."user_id", "public"."benchmark_tenant_posts"."title" FROM "public"."benchmark_tenant_posts" WHERE ("public"."benchmark_tenant_posts"."tenant_id","public"."benchmark_tenant_posts"."user_id") IN (($1,$2),($3,$4),($5,$6),($7,$8),($9,$10),($11,$12),($13,$14),($15,$16),($17,$18),($19,$20),($21,$22),($23,$24),($25,$26),($27,$28),($29,$30),($31,$32),($33,$34),($35,$36),($37,$38),($39,$40),($41,$42),($43,$44),($45,$46),($47,$48),($49,$50),($51,$52),($53,$54),($55,$56),($57,$58),($59,$60),($61,$62),($63,$64),($65,$66),($67,$68),($69,$70),($71,$72),($73,$74),($75,$76),($77,$78),($79,$80),($81,$82),($83,$84),($85,$86),($87,$88),($89,$90),($91,$92),($93,$94),($95,$96),($97,$98),($99,$100),($101,$102),($103,$104),($105,$106),($107,$108),($109,$110),($111,$112),($113,$114),($115,$116),($117,$118),($119,$120),($121,$122),($123,$124),($125,$126),($127,$128),($129,$130),($131,$132),($133,$134),($135,$136),($137,$138),($139,$140),($141,$142),($143,$144),($145,$146),($147,$148),($149,$150),($151,$152),($153,$154),($155,$156),($157,$158),($159,$160),($161,$162),($163,$164),($165,$166),($167,$168),($169,$170),($171,$172),($173,$174),($175,$176),($177,$178),($179,$180),($181,$182),($183,$184),($185,$186),($187,$188),($189,$190),($191,$192),($193,$194),($195,$196),($197,$198),($199,$200)) OFFSET $201

-- Query 3
SELECT "public"."benchmark_tenant_comments"."tenant_id", "public"."benchmark_tenant_comments"."comment_id", "public"."benchmark_tenant_comments"."post_id", "public"."benchmark_tenant_comments"."body" FROM "public"."benchmark_tenant_comments" WHERE ("public"."benchmark_tenant_comments"."tenant_id","public"."benchmark_tenant_comments"."post_id") IN (($1,$2),($3,$4),($5,$6),($7,$8),($9,$10),($11,$12),($13,$14),($15,$16),($17,$18),($19,$20),($21,$22),($23,$24),($25,$26),($27,$28),($29,$30),($31,$32),($33,$34),($35,$36),($37,$38),($39,$40),($41,$42),($43,$44),($45,$46),($47,$48),($49,$50),($51,$52),($53,$54),($55,$56),($57,$58),($59,$60),($61,$62),($63,$64),($65,$66),($67,$68),($69,$70),($71,$72),($73,$74),($75,$76),($77,$78),($79,$80),($81,$82),($83,$84),($85,$86),($87,$88),($89,$90),($91,$92),($93,$94),($95,$96),($97,$98),($99,$100),($101,$102),($103,$104),($105,$106),($107,$108),($109,$110),($111,$112),($113,$114),($115,$116),($117,$118),($119,$120),($121,$122),($123,$124),($125,$126),($127,$128),($129,$130),($131,$132),($133,$134),($135,$136),($137,$138),($139,$140),($141,$142),($143,$144),($145,$146),($147,$148),($149,$150),($151,$152),($153,$154),($155,$156),($157,$158),($159,$160),($161,$162),($163,$164),($165,$166),($167,$168),($169,$170),($171,$172),($173,$174),($175,$176),($177,$178),($179,$180),($181,$182),($183,$184),($185,$186),($187,$188),($189,$190),($191,$192),($193,$194),($195,$196),($197,$198),($199,$200),($201,$202),($203,$204),($205,$206),($207,$208),($209,$210),($211,$212),($213,$214),($215,$216),($217,$218),($219,$220),($221,$222),($223,$224),($225,$226),($227,$228),($229,$230),($231,$232),($233,$234),($235,$236),($237,$238),($239,$240),($241,$242),($243,$244),($245,$246),($247,$248),($249,$250),($251,$252),($253,$254),($255,$256),($257,$258),($259,$260),($261,$262),($263,$264),($265,$266),($267,$268),($269,$270),($271,$272),($273,$274),($275,$276),($277,$278),($279,$280),($281,$282),($283,$284),($285,$286),($287,$288),($289,$290),($291,$292),($293,$294),($295,$296),($297,$298),($299,$300),($301,$302),($303,$304),($305,$306),($307,$308),($309,$310),($311,$312),($313,$314),($315,$316),($317,$318),($319,$320),($321,$322),($323,$324),($325,$326),($327,$328),($329,$330),($331,$332),($333,$334),($335,$336),($337,$338),($339,$340),($341,$342),($343,$344),($345,$346),($347,$348),($349,$350),($351,$352),($353,$354),($355,$356),($357,$358),($359,$360),($361,$362),($363,$364),($365,$366),($367,$368),($369,$370),($371,$372),($373,$374),($375,$376),($377,$378),($379,$380),($381,$382),($383,$384),($385,$386),($387,$388),($389,$390),($391,$392),($393,$394),($395,$396),($397,$398),($399,$400),($401,$402),($403,$404),($405,$406),($407,$408),($409,$410),($411,$412),($413,$414),($415,$416),($417,$418),($419,$420),($421,$422),($423,$424),($425,$426),($427,$428),($429,$430),($431,$432),($433,$434),($435,$436),($437,$438),($439,$440),($441,$442),($443,$444),($445,$446),($447,$448),($449,$450),($451,$452),($453,$454),($455,$456),($457,$458),($459,$460),($461,$462),($463,$464),($465,$466),($467,$468),($469,$470),($471,$472),($473,$474),($475,$476),($477,$478),($479,$480),($481,$482),($483,$484),($485,$486),($487,$488),($489,$490),($491,$492),($493,$494),($495,$496),($497,$498),($499,$500),($501,$502),($503,$504),($505,$506),($507,$508),($509,$510),($511,$512),($513,$514),($515,$516),($517,$518),($519,$520),($521,$522),($523,$524),($525,$526),($527,$528),($529,$530),($531,$532),($533,$534),($535,$536),($537,$538),($539,$540),($541,$542),($543,$544),($545,$546),($547,$548),($549,$550),($551,$552),($553,$554),($555,$556),($557,$558),($559,$560),($561,$562),($563,$564),($565,$566),($567,$568),($569,$570),($571,$572),($573,$574),($575,$576),($577,$578),($579,$580),($581,$582),($583,$584),($585,$586),($587,$588),($589,$590),($591,$592),($593,$594),($595,$596),($597,$598),($599,$600),($601,$602),($603,$604),($605,$606),($607,$608),($609,$610),($611,$612),($613,$614),($615,$616),($617,$618),($619,$620),($621,$622),($623,$624),($625,$626),($627,$628),($629,$630),($631,$632),($633,$634),($635,$636),($637,$638),($639,$640),($641,$642),($643,$644),($645,$646),($647,$648),($649,$650),($651,$652),($653,$654),($655,$656),($657,$658),($659,$660),($661,$662),($663,$664),($665,$666),($667,$668),($669,$670),($671,$672),($673,$674),($675,$676),($677,$678),($679,$680),($681,$682),($683,$684),($685,$686),($687,$688),($689,$690),($691,$692),($693,$694),($695,$696),($697,$698),($699,$700),($701,$702),($703,$704),($705,$706),($707,$708),($709,$710),($711,$712),($713,$714),($715,$716),($717,$718),($719,$720),($721,$722),($723,$724),($725,$726),($727,$728),($729,$730),($731,$732),($733,$734),($735,$736),($737,$738),($739,$740),($741,$742),($743,$744),($745,$746),($747,$748),($749,$750),($751,$752),($753,$754),($755,$756),($757,$758),($759,$760),($761,$762),($763,$764),($765,$766),($767,$768),($769,$770),($771,$772),($773,$774),($775,$776),($777,$778),($779,$780),($781,$782),($783,$784),($785,$786),($787,$788),($789,$790),($791,$792),($793,$794),($795,$796),($797,$798),($799,$800),($801,$802),($803,$804),($805,$806),($807,$808),($809,$810),($811,$812),($813,$814),($815,$816),($817,$818),($819,$820),($821,$822),($823,$824),($825,$826),($827,$828),($829,$830),($831,$832),($833,$834),($835,$836),($837,$838),($839,$840),($841,$842),($843,$844),($845,$846),($847,$848),($849,$850),($851,$852),($853,$854),($855,$856),($857,$858),($859,$860),($861,$862),($863,$864),($865,$866),($867,$868),($869,$870),($871,$872),($873,$874),($875,$876),($877,$878),($879,$880),($881,$882),($883,$884),($885,$886),($887,$888),($889,$890),($891,$892),($893,$894),($895,$896),($897,$898),($899,$900),($901,$902),($903,$904),($905,$906),($907,$908),($909,$910),($911,$912),($913,$914),($915,$916),($917,$918),($919,$920),($921,$922),($923,$924),($925,$926),($927,$928),($929,$930),($931,$932),($933,$934),($935,$936),($937,$938),($939,$940),($941,$942),($943,$944),($945,$946),($947,$948),($949,$950),($951,$952),($953,$954),($955,$956),($957,$958),($959,$960),($961,$962),($963,$964),($965,$966),($967,$968),($969,$970),($971,$972),($973,$974),($975,$976),($977,$978),($979,$980),($981,$982),($983,$984),($985,$986),($987,$988),($989,$990),($991,$992),($993,$994),($995,$996),($997,$998),($999,$1000),($1001,$1002),($1003,$1004),($1005,$1006),($1007,$1008),($1009,$1010),($1011,$1012),($1013,$1014),($1015,$1016),($1017,$1018),($1019,$1020),($1021,$1022),($1023,$1024),($1025,$1026),($1027,$1028),($1029,$1030),($1031,$1032),($1033,$1034),($1035,$1036),($1037,$1038),($1039,$1040),($1041,$1042),($1043,$1044),($1045,$1046),($1047,$1048),($1049,$1050),($1051,$1052),($1053,$1054),($1055,$1056),($1057,$1058),($1059,$1060),($1061,$1062),($1063,$1064),($1065,$1066),($1067,$1068),($1069,$1070),($1071,$1072),($1073,$1074),($1075,$1076),($1077,$1078),($1079,$1080),($1081,$1082),($1083,$1084),($1085,$1086),($1087,$1088),($1089,$1090),($1091,$1092),($1093,$1094),($1095,$1096),($1097,$1098),($1099,$1100),($1101,$1102),($1103,$1104),($1105,$1106),($1107,$1108),($1109,$1110),($1111,$1112),($1113,$1114),($1115,$1116),($1117,$1118),($1119,$1120),($1121,$1122),($1123,$1124),($1125,$1126),($1127,$1128),($1129,$1130),($1131,$1132),($1133,$1134),($1135,$1136),($1137,$1138),($1139,$1140),($1141,$1142),($1143,$1144),($1145,$1146),($1147,$1148),($1149,$1150),($1151,$1152),($1153,$1154),($1155,$1156),($1157,$1158),($1159,$1160),($1161,$1162),($1163,$1164),($1165,$1166),($1167,$1168),($1169,$1170),($1171,$1172),($1173,$1174),($1175,$1176),($1177,$1178),($1179,$1180),($1181,$1182),($1183,$1184),($1185,$1186),($1187,$1188),($1189,$1190),($1191,$1192),($1193,$1194),($1195,$1196),($1197,$1198),($1199,$1200),($1201,$1202),($1203,$1204),($1205,$1206),($1207,$1208),($1209,$1210),($1211,$1212),($1213,$1214),($1215,$1216),($1217,$1218),($1219,$1220),($1221,$1222),($1223,$1224),($1225,$1226),($1227,$1228),($1229,$1230),($1231,$1232),($1233,$1234),($1235,$1236),($1237,$1238),($1239,$1240),($1241,$1242),($1243,$1244),($1245,$1246),($1247,$1248),($1249,$1250),($1251,$1252),($1253,$1254),($1255,$1256),($1257,$1258),($1259,$1260),($1261,$1262),($1263,$1264),($1265,$1266),($1267,$1268),($1269,$1270),($1271,$1272),($1273,$1274),($1275,$1276),($1277,$1278),($1279,$1280),($1281,$1282),($1283,$1284),($1285,$1286),($1287,$1288),($1289,$1290),($1291,$1292),($1293,$1294),($1295,$1296),($1297,$1298),($1299,$1300),($1301,$1302),($1303,$1304),($1305,$1306),($1307,$1308),($1309,$1310),($1311,$1312),($1313,$1314),($1315,$1316),($1317,$1318),($1319,$1320),($1321,$1322),($1323,$1324),($1325,$1326),($1327,$1328),($1329,$1330),($1331,$1332),($1333,$1334),($1335,$1336),($1337,$1338),($1339,$1340),($1341,$1342),($1343,$1344),($1345,$1346),($1347,$1348),($1349,$1350),($1351,$1352),($1353,$1354),($1355,$1356),($1357,$1358),($1359,$1360),($1361,$1362),($1363,$1364),($1365,$1366),($1367,$1368),($1369,$1370),($1371,$1372),($1373,$1374),($1375,$1376),($1377,$1378),($1379,$1380),($1381,$1382),($1383,$1384),($1385,$1386),($1387,$1388),($1389,$1390),($1391,$1392),($1393,$1394),($1395,$1396),($1397,$1398),($1399,$1400),($1401,$1402),($1403,$1404),($1405,$1406),($1407,$1408),($1409,$1410),($1411,$1412),($1413,$1414),($1415,$1416),($1417,$1418),($1419,$1420),($1421,$1422),($1423,$1424),($1425,$1426),($1427,$1428),($1429,$1430),($1431,$1432),($1433,$1434),($1435,$1436),($1437,$1438),($1439,$1440),($1441,$1442),($1443,$1444),($1445,$1446),($1447,$1448),($1449,$1450),($1451,$1452),($1453,$1454),($1455,$1456),($1457,$1458),($1459,$1460),($1461,$1462),($1463,$1464),($1465,$1466),($1467,$1468),($1469,$1470),($1471,$1472),($1473,$1474),($1475,$1476),($1477,$1478),($1479,$1480),($1481,$1482),($1483,$1484),($1485,$1486),($1487,$1488),($1489,$1490),($1491,$1492),($1493,$1494),($1495,$1496),($1497,$1498),($1499,$1500),($1501,$1502),($1503,$1504),($1505,$1506),($1507,$1508),($1509,$1510),($1511,$1512),($1513,$1514),($1515,$1516),($1517,$1518),($1519,$1520),($1521,$1522),($1523,$1524),($1525,$1526),($1527,$1528),($1529,$1530),($1531,$1532),($1533,$1534),($1535,$1536),($1537,$1538),($1539,$1540),($1541,$1542),($1543,$1544),($1545,$1546),($1547,$1548),($1549,$1550),($1551,$1552),($1553,$1554),($1555,$1556),($1557,$1558),($1559,$1560),($1561,$1562),($1563,$1564),($1565,$1566),($1567,$1568),($1569,$1570),($1571,$1572),($1573,$1574),($1575,$1576),($1577,$1578),($1579,$1580),($1581,$1582),($1583,$1584),($1585,$1586),($1587,$1588),($1589,$1590),($1591,$1592),($1593,$1594),($1595,$1596),($1597,$1598),($1599,$1600),($1601,$1602),($1603,$1604),($1605,$1606),($1607,$1608),($1609,$1610),($1611,$1612),($1613,$1614),($1615,$1616),($1617,$1618),($1619,$1620),($1621,$1622),($1623,$1624),($1625,$1626),($1627,$1628),($1629,$1630),($1631,$1632),($1633,$1634),($1635,$1636),($1637,$1638),($1639,$1640),($1641,$1642),($1643,$1644),($1645,$1646),($1647,$1648),($1649,$1650),($1651,$1652),($1653,$1654),($1655,$1656),($1657,$1658),($1659,$1660),($1661,$1662),($1663,$1664),($1665,$1666),($1667,$1668),($1669,$1670),($1671,$1672),($1673,$1674),($1675,$1676),($1677,$1678),($1679,$1680),($1681,$1682),($1683,$1684),($1685,$1686),($1687,$1688),($1689,$1690),($1691,$1692),($1693,$1694),($1695,$1696),($1697,$1698),($1699,$1700),($1701,$1702),($1703,$1704),($1705,$1706),($1707,$1708),($1709,$1710),($1711,$1712),($1713,$1714),($1715,$1716),($1717,$1718),($1719,$1720),($1721,$1722),($1723,$1724),($1725,$1726),($1727,$1728),($1729,$1730),($1731,$1732),($1733,$1734),($1735,$1736),($1737,$1738),($1739,$1740),($1741,$1742),($1743,$1744),($1745,$1746),($1747,$1748),($1749,$1750),($1751,$1752),($1753,$1754),($1755,$1756),($1757,$1758),($1759,$1760),($1761,$1762),($1763,$1764),($1765,$1766),($1767,$1768),($1769,$1770),($1771,$1772),($1773,$1774),($1775,$1776),($1777,$1778),($1779,$1780),($1781,$1782),($1783,$1784),($1785,$1786),($1787,$1788),($1789,$1790),($1791,$1792),($1793,$1794),($1795,$1796),($1797,$1798),($1799,$1800),($1801,$1802),($1803,$1804),($1805,$1806),($1807,$1808),($1809,$1810),($1811,$1812),($1813,$1814),($1815,$1816),($1817,$1818),($1819,$1820),($1821,$1822),($1823,$1824),($1825,$1826),($1827,$1828),($1829,$1830),($1831,$1832),($1833,$1834),($1835,$1836),($1837,$1838),($1839,$1840),($1841,$1842),($1843,$1844),($1845,$1846),($1847,$1848),($1849,$1850),($1851,$1852),($1853,$1854),($1855,$1856),($1857,$1858),($1859,$1860),($1861,$1862),($1863,$1864),($1865,$1866),($1867,$1868),($1869,$1870),($1871,$1872),($1873,$1874),($1875,$1876),($1877,$1878),($1879,$1880),($1881,$1882),($1883,$1884),($1885,$1886),($1887,$1888),($1889,$1890),($1891,$1892),($1893,$1894),($1895,$1896),($1897,$1898),($1899,$1900),($1901,$1902),($1903,$1904),($1905,$1906),($1907,$1908),($1909,$1910),($1911,$1912),($1913,$1914),($1915,$1916),($1917,$1918),($1919,$1920),($1921,$1922),($1923,$1924),($1925,$1926),($1927,$1928),($1929,$1930),($1931,$1932),($1933,$1934),($1935,$1936),($1937,$1938),($1939,$1940),($1941,$1942),($1943,$1944),($1945,$1946),($1947,$1948),($1949,$1950),($1951,$1952),($1953,$1954),($1955,$1956),($1957,$1958),($1959,$1960),($1961,$1962),($1963,$1964),($1965,$1966),($1967,$1968),($1969,$1970),($1971,$1972),($1973,$1974),($1975,$1976),($1977,$1978),($1979,$1980),($1981,$1982),($1983,$1984),($1985,$1986),($1987,$1988),($1989,$1990),($1991,$1992),($1993,$1994),($1995,$1996),($1997,$1998),($1999,$2000)) OFFSET $2001
```


#### Kysely

**Query Count:** 3

```sql
-- Query 1
select * from "benchmark_tenant_users" where "tenant_id" = $1 limit $2

-- Query 2
select * from "benchmark_tenant_posts" where "tenant_id" = $1 and "user_id" in ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46, $47, $48, $49, $50, $51, $52, $53, $54, $55, $56, $57, $58, $59, $60, $61, $62, $63, $64, $65, $66, $67, $68, $69, $70, $71, $72, $73, $74, $75, $76, $77, $78, $79, $80, $81, $82, $83, $84, $85, $86, $87, $88, $89, $90, $91, $92, $93, $94, $95, $96, $97, $98, $99, $100, $101)

-- Query 3
select * from "benchmark_tenant_comments" where "tenant_id" = $1 and "post_id" in ($2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25, $26, $27, $28, $29, $30, $31, $32, $33, $34, $35, $36, $37, $38, $39, $40, $41, $42, $43, $44, $45, $46, $47, $48, $49, $50, $51, $52, $53, $54, $55, $56, $57, $58, $59, $60, $61, $62, $63, $64, $65, $66, $67, $68, $69, $70, $71, $72, $73, $74, $75, $76, $77, $78, $79, $80, $81, $82, $83, $84, $85, $86, $87, $88, $89, $90, $91, $92, $93, $94, $95, $96, $97, $98, $99, $100, $101, $102, $103, $104, $105, $106, $107, $108, $109, $110, $111, $112, $113, $114, $115, $116, $117, $118, $119, $120, $121, $122, $123, $124, $125, $126, $127, $128, $129, $130, $131, $132, $133, $134, $135, $136, $137, $138, $139, $140, $141, $142, $143, $144, $145, $146, $147, $148, $149, $150, $151, $152, $153, $154, $155, $156, $157, $158, $159, $160, $161, $162, $163, $164, $165, $166, $167, $168, $169, $170, $171, $172, $173, $174, $175, $176, $177, $178, $179, $180, $181, $182, $183, $184, $185, $186, $187, $188, $189, $190, $191, $192, $193, $194, $195, $196, $197, $198, $199, $200, $201, $202, $203, $204, $205, $206, $207, $208, $209, $210, $211, $212, $213, $214, $215, $216, $217, $218, $219, $220, $221, $222, $223, $224, $225, $226, $227, $228, $229, $230, $231, $232, $233, $234, $235, $236, $237, $238, $239, $240, $241, $242, $243, $244, $245, $246, $247, $248, $249, $250, $251, $252, $253, $254, $255, $256, $257, $258, $259, $260, $261, $262, $263, $264, $265, $266, $267, $268, $269, $270, $271, $272, $273, $274, $275, $276, $277, $278, $279, $280, $281, $282, $283, $284, $285, $286, $287, $288, $289, $290, $291, $292, $293, $294, $295, $296, $297, $298, $299, $300, $301, $302, $303, $304, $305, $306, $307, $308, $309, $310, $311, $312, $313, $314, $315, $316, $317, $318, $319, $320, $321, $322, $323, $324, $325, $326, $327, $328, $329, $330, $331, $332, $333, $334, $335, $336, $337, $338, $339, $340, $341, $342, $343, $344, $345, $346, $347, $348, $349, $350, $351, $352, $353, $354, $355, $356, $357, $358, $359, $360, $361, $362, $363, $364, $365, $366, $367, $368, $369, $370, $371, $372, $373, $374, $375, $376, $377, $378, $379, $380, $381, $382, $383, $384, $385, $386, $387, $388, $389, $390, $391, $392, $393, $394, $395, $396, $397, $398, $399, $400, $401, $402, $403, $404, $405, $406, $407, $408, $409, $410, $411, $412, $413, $414, $415, $416, $417, $418, $419, $420, $421, $422, $423, $424, $425, $426, $427, $428, $429, $430, $431, $432, $433, $434, $435, $436, $437, $438, $439, $440, $441, $442, $443, $444, $445, $446, $447, $448, $449, $450, $451, $452, $453, $454, $455, $456, $457, $458, $459, $460, $461, $462, $463, $464, $465, $466, $467, $468, $469, $470, $471, $472, $473, $474, $475, $476, $477, $478, $479, $480, $481, $482, $483, $484, $485, $486, $487, $488, $489, $490, $491, $492, $493, $494, $495, $496, $497, $498, $499, $500, $501, $502, $503, $504, $505, $506, $507, $508, $509, $510, $511, $512, $513, $514, $515, $516, $517, $518, $519, $520, $521, $522, $523, $524, $525, $526, $527, $528, $529, $530, $531, $532, $533, $534, $535, $536, $537, $538, $539, $540, $541, $542, $543, $544, $545, $546, $547, $548, $549, $550, $551, $552, $553, $554, $555, $556, $557, $558, $559, $560, $561, $562, $563, $564, $565, $566, $567, $568, $569, $570, $571, $572, $573, $574, $575, $576, $577, $578, $579, $580, $581, $582, $583, $584, $585, $586, $587, $588, $589, $590, $591, $592, $593, $594, $595, $596, $597, $598, $599, $600, $601, $602, $603, $604, $605, $606, $607, $608, $609, $610, $611, $612, $613, $614, $615, $616, $617, $618, $619, $620, $621, $622, $623, $624, $625, $626, $627, $628, $629, $630, $631, $632, $633, $634, $635, $636, $637, $638, $639, $640, $641, $642, $643, $644, $645, $646, $647, $648, $649, $650, $651, $652, $653, $654, $655, $656, $657, $658, $659, $660, $661, $662, $663, $664, $665, $666, $667, $668, $669, $670, $671, $672, $673, $674, $675, $676, $677, $678, $679, $680, $681, $682, $683, $684, $685, $686, $687, $688, $689, $690, $691, $692, $693, $694, $695, $696, $697, $698, $699, $700, $701, $702, $703, $704, $705, $706, $707, $708, $709, $710, $711, $712, $713, $714, $715, $716, $717, $718, $719, $720, $721, $722, $723, $724, $725, $726, $727, $728, $729, $730, $731, $732, $733, $734, $735, $736, $737, $738, $739, $740, $741, $742, $743, $744, $745, $746, $747, $748, $749, $750, $751, $752, $753, $754, $755, $756, $757, $758, $759, $760, $761, $762, $763, $764, $765, $766, $767, $768, $769, $770, $771, $772, $773, $774, $775, $776, $777, $778, $779, $780, $781, $782, $783, $784, $785, $786, $787, $788, $789, $790, $791, $792, $793, $794, $795, $796, $797, $798, $799, $800, $801, $802, $803, $804, $805, $806, $807, $808, $809, $810, $811, $812, $813, $814, $815, $816, $817, $818, $819, $820, $821, $822, $823, $824, $825, $826, $827, $828, $829, $830, $831, $832, $833, $834, $835, $836, $837, $838, $839, $840, $841, $842, $843, $844, $845, $846, $847, $848, $849, $850, $851, $852, $853, $854, $855, $856, $857, $858, $859, $860, $861, $862, $863, $864, $865, $866, $867, $868, $869, $870, $871, $872, $873, $874, $875, $876, $877, $878, $879, $880, $881, $882, $883, $884, $885, $886, $887, $888, $889, $890, $891, $892, $893, $894, $895, $896, $897, $898, $899, $900, $901, $902, $903, $904, $905, $906, $907, $908, $909, $910, $911, $912, $913, $914, $915, $916, $917, $918, $919, $920, $921, $922, $923, $924, $925, $926, $927, $928, $929, $930, $931, $932, $933, $934, $935, $936, $937, $938, $939, $940, $941, $942, $943, $944, $945, $946, $947, $948, $949, $950, $951, $952, $953, $954, $955, $956, $957, $958, $959, $960, $961, $962, $963, $964, $965, $966, $967, $968, $969, $970, $971, $972, $973, $974, $975, $976, $977, $978, $979, $980, $981, $982, $983, $984, $985, $986, $987, $988, $989, $990, $991, $992, $993, $994, $995, $996, $997, $998, $999, $1000, $1001)
```


#### Drizzle

**Query Count:** 1

```sql
-- Query 1
select "tenantUsers"."tenant_id", "tenantUsers"."user_id", "tenantUsers"."name", "tenantUsers_posts"."data" as "posts" from "benchmark_tenant_users" "tenantUsers" left join lateral (select coalesce(json_agg(json_build_array("tenantUsers_posts"."tenant_id", "tenantUsers_posts"."post_id", "tenantUsers_posts"."user_id", "tenantUsers_posts"."title", "tenantUsers_posts_comments"."data")), '[]'::json) as "data" from "benchmark_tenant_posts" "tenantUsers_posts" left join lateral (select coalesce(json_agg(json_build_array("tenantUsers_posts_comments"."tenant_id", "tenantUsers_posts_comments"."comment_id", "tenantUsers_posts_comments"."post_id", "tenantUsers_posts_comments"."body")), '[]'::json) as "data" from "benchmark_tenant_comments" "tenantUsers_posts_comments" where ("tenantUsers_posts_comments"."tenant_id" = "tenantUsers_posts"."tenant_id" and "tenantUsers_posts_comments"."post_id" = "tenantUsers_posts"."post_id")) "tenantUsers_posts_comments" on true where ("tenantUsers_posts"."tenant_id" = "tenantUsers"."tenant_id" and "tenantUsers_posts"."user_id" = "tenantUsers"."user_id")) "tenantUsers_posts" on true where "tenantUsers"."tenant_id" = $1 limit $2
```


#### TypeORM

**Query Count:** 2

```sql
-- Query 1
SELECT DISTINCT "distinctAlias"."TypeORMTenantUser_tenant_id" AS "ids_TypeORMTenantUser_tenant_id", "distinctAlias"."TypeORMTenantUser_user_id" AS "ids_TypeORMTenantUser_user_id" FROM (SELECT "TypeORMTenantUser"."tenant_id" AS "TypeORMTenantUser_tenant_id", "TypeORMTenantUser"."user_id" AS "TypeORMTenantUser_user_id", "TypeORMTenantUser"."name" AS "TypeORMTenantUser_name", "TypeORMTenantUser__TypeORMTenantUser_posts"."tenant_id" AS "TypeORMTenantUser__TypeORMTenantUser_posts_tenant_id", "TypeORMTenantUser__TypeORMTenantUser_posts"."post_id" AS "TypeORMTenantUser__TypeORMTenantUser_posts_post_id", "TypeORMTenantUser__TypeORMTenantUser_posts"."user_id" AS "TypeORMTenantUser__TypeORMTenantUser_posts_user_id", "TypeORMTenantUser__TypeORMTenantUser_posts"."title" AS "TypeORMTenantUser__TypeORMTenantUser_posts_title", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."tenant_id" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_tenant_id", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."comment_id" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_comment_id", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."post_id" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_post_id", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."body" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_body" FROM "benchmark_tenant_users" "TypeORMTenantUser" LEFT JOIN "benchmark_tenant_posts" "TypeORMTenantUser__TypeORMTenantUser_posts" ON "TypeORMTenantUser__TypeORMTenantUser_posts"."tenant_id"="TypeORMTenantUser"."tenant_id" AND "TypeORMTenantUser__TypeORMTenantUser_posts"."user_id"="TypeORMTenantUser"."user_id"  LEFT JOIN "benchmark_tenant_comments" "b3407b010f80c7da84d3ec5277e75c8bb9ee562e" ON "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."tenant_id"="TypeORMTenantUser__TypeORMTenantUser_posts"."tenant_id" AND "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."post_id"="TypeORMTenantUser__TypeORMTenantUser_posts"."post_id" WHERE (("TypeORMTenantUser"."tenant_id" = $1))) "distinctAlias" ORDER BY "TypeORMTenantUser_tenant_id" ASC, "TypeORMTenantUser_user_id" ASC LIMIT 100

-- Query 2
SELECT "TypeORMTenantUser"."tenant_id" AS "TypeORMTenantUser_tenant_id", "TypeORMTenantUser"."user_id" AS "TypeORMTenantUser_user_id", "TypeORMTenantUser"."name" AS "TypeORMTenantUser_name", "TypeORMTenantUser__TypeORMTenantUser_posts"."tenant_id" AS "TypeORMTenantUser__TypeORMTenantUser_posts_tenant_id", "TypeORMTenantUser__TypeORMTenantUser_posts"."post_id" AS "TypeORMTenantUser__TypeORMTenantUser_posts_post_id", "TypeORMTenantUser__TypeORMTenantUser_posts"."user_id" AS "TypeORMTenantUser__TypeORMTenantUser_posts_user_id", "TypeORMTenantUser__TypeORMTenantUser_posts"."title" AS "TypeORMTenantUser__TypeORMTenantUser_posts_title", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."tenant_id" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_tenant_id", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."comment_id" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_comment_id", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."post_id" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_post_id", "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."body" AS "b3407b010f80c7da84d3ec5277e75c8bb9ee562e_body" FROM "benchmark_tenant_users" "TypeORMTenantUser" LEFT JOIN "benchmark_tenant_posts" "TypeORMTenantUser__TypeORMTenantUser_posts" ON "TypeORMTenantUser__TypeORMTenantUser_posts"."tenant_id"="TypeORMTenantUser"."tenant_id" AND "TypeORMTenantUser__TypeORMTenantUser_posts"."user_id"="TypeORMTenantUser"."user_id"  LEFT JOIN "benchmark_tenant_comments" "b3407b010f80c7da84d3ec5277e75c8bb9ee562e" ON "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."tenant_id"="TypeORMTenantUser__TypeORMTenantUser_posts"."tenant_id" AND "b3407b010f80c7da84d3ec5277e75c8bb9ee562e"."post_id"="TypeORMTenantUser__TypeORMTenantUser_posts"."post_id" WHERE ( (("TypeORMTenantUser"."tenant_id" = $1)) ) AND ( "TypeORMTenantUser"."tenant_id"=$2 AND "TypeORMTenantUser"."user_id"=$3 OR "TypeORMTenantUser"."tenant_id"=$4 AND "TypeORMTenantUser"."user_id"=$5 OR "TypeORMTenantUser"."tenant_id"=$6 AND "TypeORMTenantUser"."user_id"=$7 OR "TypeORMTenantUser"."tenant_id"=$8 AND "TypeORMTenantUser"."user_id"=$9 OR "TypeORMTenantUser"."tenant_id"=$10 AND "TypeORMTenantUser"."user_id"=$11 OR "TypeORMTenantUser"."tenant_id"=$12 AND "TypeORMTenantUser"."user_id"=$13 OR "TypeORMTenantUser"."tenant_id"=$14 AND "TypeORMTenantUser"."user_id"=$15 OR "TypeORMTenantUser"."tenant_id"=$16 AND "TypeORMTenantUser"."user_id"=$17 OR "TypeORMTenantUser"."tenant_id"=$18 AND "TypeORMTenantUser"."user_id"=$19 OR "TypeORMTenantUser"."tenant_id"=$20 AND "TypeORMTenantUser"."user_id"=$21 OR "TypeORMTenantUser"."tenant_id"=$22 AND "TypeORMTenantUser"."user_id"=$23 OR "TypeORMTenantUser"."tenant_id"=$24 AND "TypeORMTenantUser"."user_id"=$25 OR "TypeORMTenantUser"."tenant_id"=$26 AND "TypeORMTenantUser"."user_id"=$27 OR "TypeORMTenantUser"."tenant_id"=$28 AND "TypeORMTenantUser"."user_id"=$29 OR "TypeORMTenantUser"."tenant_id"=$30 AND "TypeORMTenantUser"."user_id"=$31 OR "TypeORMTenantUser"."tenant_id"=$32 AND "TypeORMTenantUser"."user_id"=$33 OR "TypeORMTenantUser"."tenant_id"=$34 AND "TypeORMTenantUser"."user_id"=$35 OR "TypeORMTenantUser"."tenant_id"=$36 AND "TypeORMTenantUser"."user_id"=$37 OR "TypeORMTenantUser"."tenant_id"=$38 AND "TypeORMTenantUser"."user_id"=$39 OR "TypeORMTenantUser"."tenant_id"=$40 AND "TypeORMTenantUser"."user_id"=$41 OR "TypeORMTenantUser"."tenant_id"=$42 AND "TypeORMTenantUser"."user_id"=$43 OR "TypeORMTenantUser"."tenant_id"=$44 AND "TypeORMTenantUser"."user_id"=$45 OR "TypeORMTenantUser"."tenant_id"=$46 AND "TypeORMTenantUser"."user_id"=$47 OR "TypeORMTenantUser"."tenant_id"=$48 AND "TypeORMTenantUser"."user_id"=$49 OR "TypeORMTenantUser"."tenant_id"=$50 AND "TypeORMTenantUser"."user_id"=$51 OR "TypeORMTenantUser"."tenant_id"=$52 AND "TypeORMTenantUser"."user_id"=$53 OR "TypeORMTenantUser"."tenant_id"=$54 AND "TypeORMTenantUser"."user_id"=$55 OR "TypeORMTenantUser"."tenant_id"=$56 AND "TypeORMTenantUser"."user_id"=$57 OR "TypeORMTenantUser"."tenant_id"=$58 AND "TypeORMTenantUser"."user_id"=$59 OR "TypeORMTenantUser"."tenant_id"=$60 AND "TypeORMTenantUser"."user_id"=$61 OR "TypeORMTenantUser"."tenant_id"=$62 AND "TypeORMTenantUser"."user_id"=$63 OR "TypeORMTenantUser"."tenant_id"=$64 AND "TypeORMTenantUser"."user_id"=$65 OR "TypeORMTenantUser"."tenant_id"=$66 AND "TypeORMTenantUser"."user_id"=$67 OR "TypeORMTenantUser"."tenant_id"=$68 AND "TypeORMTenantUser"."user_id"=$69 OR "TypeORMTenantUser"."tenant_id"=$70 AND "TypeORMTenantUser"."user_id"=$71 OR "TypeORMTenantUser"."tenant_id"=$72 AND "TypeORMTenantUser"."user_id"=$73 OR "TypeORMTenantUser"."tenant_id"=$74 AND "TypeORMTenantUser"."user_id"=$75 OR "TypeORMTenantUser"."tenant_id"=$76 AND "TypeORMTenantUser"."user_id"=$77 OR "TypeORMTenantUser"."tenant_id"=$78 AND "TypeORMTenantUser"."user_id"=$79 OR "TypeORMTenantUser"."tenant_id"=$80 AND "TypeORMTenantUser"."user_id"=$81 OR "TypeORMTenantUser"."tenant_id"=$82 AND "TypeORMTenantUser"."user_id"=$83 OR "TypeORMTenantUser"."tenant_id"=$84 AND "TypeORMTenantUser"."user_id"=$85 OR "TypeORMTenantUser"."tenant_id"=$86 AND "TypeORMTenantUser"."user_id"=$87 OR "TypeORMTenantUser"."tenant_id"=$88 AND "TypeORMTenantUser"."user_id"=$89 OR "TypeORMTenantUser"."tenant_id"=$90 AND "TypeORMTenantUser"."user_id"=$91 OR "TypeORMTenantUser"."tenant_id"=$92 AND "TypeORMTenantUser"."user_id"=$93 OR "TypeORMTenantUser"."tenant_id"=$94 AND "TypeORMTenantUser"."user_id"=$95 OR "TypeORMTenantUser"."tenant_id"=$96 AND "TypeORMTenantUser"."user_id"=$97 OR "TypeORMTenantUser"."tenant_id"=$98 AND "TypeORMTenantUser"."user_id"=$99 OR "TypeORMTenantUser"."tenant_id"=$100 AND "TypeORMTenantUser"."user_id"=$101 OR "TypeORMTenantUser"."tenant_id"=$102 AND "TypeORMTenantUser"."user_id"=$103 OR "TypeORMTenantUser"."tenant_id"=$104 AND "TypeORMTenantUser"."user_id"=$105 OR "TypeORMTenantUser"."tenant_id"=$106 AND "TypeORMTenantUser"."user_id"=$107 OR "TypeORMTenantUser"."tenant_id"=$108 AND "TypeORMTenantUser"."user_id"=$109 OR "TypeORMTenantUser"."tenant_id"=$110 AND "TypeORMTenantUser"."user_id"=$111 OR "TypeORMTenantUser"."tenant_id"=$112 AND "TypeORMTenantUser"."user_id"=$113 OR "TypeORMTenantUser"."tenant_id"=$114 AND "TypeORMTenantUser"."user_id"=$115 OR "TypeORMTenantUser"."tenant_id"=$116 AND "TypeORMTenantUser"."user_id"=$117 OR "TypeORMTenantUser"."tenant_id"=$118 AND "TypeORMTenantUser"."user_id"=$119 OR "TypeORMTenantUser"."tenant_id"=$120 AND "TypeORMTenantUser"."user_id"=$121 OR "TypeORMTenantUser"."tenant_id"=$122 AND "TypeORMTenantUser"."user_id"=$123 OR "TypeORMTenantUser"."tenant_id"=$124 AND "TypeORMTenantUser"."user_id"=$125 OR "TypeORMTenantUser"."tenant_id"=$126 AND "TypeORMTenantUser"."user_id"=$127 OR "TypeORMTenantUser"."tenant_id"=$128 AND "TypeORMTenantUser"."user_id"=$129 OR "TypeORMTenantUser"."tenant_id"=$130 AND "TypeORMTenantUser"."user_id"=$131 OR "TypeORMTenantUser"."tenant_id"=$132 AND "TypeORMTenantUser"."user_id"=$133 OR "TypeORMTenantUser"."tenant_id"=$134 AND "TypeORMTenantUser"."user_id"=$135 OR "TypeORMTenantUser"."tenant_id"=$136 AND "TypeORMTenantUser"."user_id"=$137 OR "TypeORMTenantUser"."tenant_id"=$138 AND "TypeORMTenantUser"."user_id"=$139 OR "TypeORMTenantUser"."tenant_id"=$140 AND "TypeORMTenantUser"."user_id"=$141 OR "TypeORMTenantUser"."tenant_id"=$142 AND "TypeORMTenantUser"."user_id"=$143 OR "TypeORMTenantUser"."tenant_id"=$144 AND "TypeORMTenantUser"."user_id"=$145 OR "TypeORMTenantUser"."tenant_id"=$146 AND "TypeORMTenantUser"."user_id"=$147 OR "TypeORMTenantUser"."tenant_id"=$148 AND "TypeORMTenantUser"."user_id"=$149 OR "TypeORMTenantUser"."tenant_id"=$150 AND "TypeORMTenantUser"."user_id"=$151 OR "TypeORMTenantUser"."tenant_id"=$152 AND "TypeORMTenantUser"."user_id"=$153 OR "TypeORMTenantUser"."tenant_id"=$154 AND "TypeORMTenantUser"."user_id"=$155 OR "TypeORMTenantUser"."tenant_id"=$156 AND "TypeORMTenantUser"."user_id"=$157 OR "TypeORMTenantUser"."tenant_id"=$158 AND "TypeORMTenantUser"."user_id"=$159 OR "TypeORMTenantUser"."tenant_id"=$160 AND "TypeORMTenantUser"."user_id"=$161 OR "TypeORMTenantUser"."tenant_id"=$162 AND "TypeORMTenantUser"."user_id"=$163 OR "TypeORMTenantUser"."tenant_id"=$164 AND "TypeORMTenantUser"."user_id"=$165 OR "TypeORMTenantUser"."tenant_id"=$166 AND "TypeORMTenantUser"."user_id"=$167 OR "TypeORMTenantUser"."tenant_id"=$168 AND "TypeORMTenantUser"."user_id"=$169 OR "TypeORMTenantUser"."tenant_id"=$170 AND "TypeORMTenantUser"."user_id"=$171 OR "TypeORMTenantUser"."tenant_id"=$172 AND "TypeORMTenantUser"."user_id"=$173 OR "TypeORMTenantUser"."tenant_id"=$174 AND "TypeORMTenantUser"."user_id"=$175 OR "TypeORMTenantUser"."tenant_id"=$176 AND "TypeORMTenantUser"."user_id"=$177 OR "TypeORMTenantUser"."tenant_id"=$178 AND "TypeORMTenantUser"."user_id"=$179 OR "TypeORMTenantUser"."tenant_id"=$180 AND "TypeORMTenantUser"."user_id"=$181 OR "TypeORMTenantUser"."tenant_id"=$182 AND "TypeORMTenantUser"."user_id"=$183 OR "TypeORMTenantUser"."tenant_id"=$184 AND "TypeORMTenantUser"."user_id"=$185 OR "TypeORMTenantUser"."tenant_id"=$186 AND "TypeORMTenantUser"."user_id"=$187 OR "TypeORMTenantUser"."tenant_id"=$188 AND "TypeORMTenantUser"."user_id"=$189 OR "TypeORMTenantUser"."tenant_id"=$190 AND "TypeORMTenantUser"."user_id"=$191 OR "TypeORMTenantUser"."tenant_id"=$192 AND "TypeORMTenantUser"."user_id"=$193 OR "TypeORMTenantUser"."tenant_id"=$194 AND "TypeORMTenantUser"."user_id"=$195 OR "TypeORMTenantUser"."tenant_id"=$196 AND "TypeORMTenantUser"."user_id"=$197 OR "TypeORMTenantUser"."tenant_id"=$198 AND "TypeORMTenantUser"."user_id"=$199 OR "TypeORMTenantUser"."tenant_id"=$200 AND "TypeORMTenantUser"."user_id"=$201 )
```


---

## Key Findings

### Why Drizzle is Fast (Single Key)

Drizzle uses PostgreSQL's `LATERAL JOIN` with `json_agg()` to fetch all nested data in a **single query**:

```sql
SELECT "users".*, "posts"."data" as "posts"
FROM "benchmark_users" "users"
LEFT JOIN LATERAL (
  SELECT json_agg(json_build_array("posts".*, "comments"."data")) as "data"
  FROM "benchmark_posts" "posts"
  LEFT JOIN LATERAL (
    SELECT json_agg(...) as "data"
    FROM "benchmark_comments" ...
  ) "comments" ON true
  WHERE "posts"."author_id" = "users"."id"
) "posts" ON true
```

This reduces network round-trips but increases DB-side processing.

### litedbmodel's Approach

litedbmodel uses **batch loading** with separate queries:
1. Load users
2. Batch load all posts for those users (using `= ANY($1::int[])`)
3. Batch load all comments for those posts

**Pros:**
- Simpler queries, easier to debug
- Less DB-side JSON processing
- Works well with query caching

**Cons:**
- Multiple round-trips (mitigated by batching)

### Composite Key Handling

For composite keys, litedbmodel uses `unnest + JOIN`:

```sql
SELECT * FROM table
JOIN unnest($1::int[], $2::int[]) AS _keys(col1, col2)
  ON table.col1 = _keys.col1 AND table.col2 = _keys.col2
```

This is more efficient than multiple OR conditions or (col1, col2) IN ((v1,v2),...).

---

## Conclusion

| Scenario | Winner | Notes |
|----------|--------|-------|
| Single Key (speed) | Drizzle | 1 query via LATERAL JOIN + JSON |
| Single Key (simplicity) | litedbmodel | Transparent lazy loading |
| Composite Key | litedbmodel | Native unnest support |
| Code Maintainability | litedbmodel | No manual query writing |

**litedbmodel** offers the best balance of performance and developer experience, especially for composite key relations and complex data models.
